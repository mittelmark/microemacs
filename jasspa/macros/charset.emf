; -!- emf -!-
; This is part of the JASSPA MicroEmacs macro files
; Copyright (C) 1999-2009 JASSPA (www.jasspa.com)
; See the file me.emf for copying and conditions.
;
; Created:     Tue Feb 16 1999
; Synopsis:    Set up the chatacter translations for the different char sets.
; Authors:     Steven Phillips
;
; Notes:       The internal default is ISO-8859 (1-...).
;               All spelling dictionaries (to date anyway) are encoded 
;               with this character format and rules are required to 
;               translate characters into and out of this set.
;
!if &les @# 1
    ; if executed with an argument of 0 or less, return the list
    ;set-variable %charset-names  "|ISO-8859|ISO-8859 with box chars|Windows ANSI (cp1252)|Windows OEM|Windows Greek|Windows Turkish|Windows Central Europe (cp1250)|Windows Cyrillic (cp1251)|DOS LatinUS CP437|DOS Latin1 CP850|DOS Cyrillic CP866|Cyrillic koi8-r|Plain Text|"
    ;set-variable %charset-value  "||ISO-box|Win-ANSI|Win-OEM|Win-GREEK|Win-TURK|Win-CENTEUR|Win-CYR|PC-437|PC-850|PC-866|koi8-r|plain-text|"
    ;set-variable %charset-names  "|ISO-8859|ISO-8859 with box chars|Windows ANSI (cp1252)|Windows OEM|Windows Greek|Windows Turkish|Windows Central Europe (cp1250)|Windows Cyrillic (cp1251)|DOS LatinUS CP437|DOS Latin1 CP850|DOS Cyrillic CP866|Cyrillic koi8-r|Plain Text|"
    ;set-variable %charset-value  "||ISO-box|Win-ANSI|Win-OEM|Win-GREEK|Win-TURK|Win-CENTEUR|Win-CYR|PC-437|PC-850|PC-866|koi8-r|plain-text|"
    set-variable %charset-names  "|ISO-W-EUR  (ISO 8859-1)|ISO-C-EUR  (ISO 8859-2)|ISO-S-EUR  (ISO 8859-3)|ISO-N-EUR  (ISO 8859-4)|ISO-CYR    (ISO 8859-5)|ISO-GREEK  (ISO 8859-7)|ISO-TURK   (ISO 8859-9)|ISO-NORTH  (ISO 8859-10)|ISO-BALT   (ISO 8859-13)|ISO-W-EURO (ISO 8859-15)|ISO-SO-EURO (ISO 8859-16)|WIN CP1250 (C-EUR)|WIN CP1251 (CYR) |WIN CP1252 (WEST)|CYRILLIC   (koi8-r)|plain-text (ASCII-0)|"
    set-variable %charset-value "|iso8859-1|iso8859-2|iso8859-3|iso8859-4|iso8859-5|iso8859-7|iso-8859-9|iso-8859-10|is8859-13|iso8859-15|iso8859-16|microsoft-cp1250|microsoft-cp1251|microsoft-cp1252|koi8-r|ascii-0|"
    set-variable %charset-types "||||||||||0|||"
    ; the windows font type
    ;set-variable %charset-types  "|||0|255|161|162|238|204|||||"
    !return
!endif
; get the users display char set
set-variable #l0 &reg &spr "/history/%s/char-set" %platform ""
set-variable #l1 1
set-variable .change-font.type 0
!if &seq #l0 ""
  set-char-mask "M" ""
!elif &seq #l0 "ISO-box"
  set-char-mask "M" ""
  set-char-mask "dp" "\CY\CM\CL\CN\CK\CX\CU\CO\CV\CW\CR\CP\CQ\C^\C_"
  set-char-mask "p"  "\CI\CJ"
  set-variable $box-chars "\CY\CM\CL\CN\CK\CX\CU\CO\CV\CW\CR"
  set-variable $window-chars "=-#*%=^   v*==^^      vv**|<   >*||<<      >>** x* > <>\\.$$\\"
  set-variable $system &band $system &bnot 0x10000
  set-variable #l1 0
!elif &seq #l0 "microsoft-cp1252"
  set-char-mask "M" ""
  set-char-mask "dp" "€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ"
  ;set-char-mask "M" ""
!elif &seq #l0 "Win-OEM"
    set-char-mask "M" "£œª¦«®¬ª®©°§±ñ²ý³ü´îµæ¶õ·ú¸ý¹û»¯¼¬½«¾ó¿¨À·ÁÂŠÃ²ÄŽÆ’Ç€ÈÔÉÊÒËÑÌÞÍÖÎ×ÏØÐÑÑ¥ÒãÓàÔâÕåÖ™×žØÙëÚéÛêÜšÝìÞçßÿà…á âƒä„å†æ‘ç‡èŠé‚êˆë‰ìí¡îŒï‹ñ¤ò•ó¢ô“õäö”÷öø›ù—ú£û–üýìþèÿ˜"
    set-variable $box-chars "³Ú¿ÀÙÂÃÅ´ÁÄ"
    set-variable $window-chars "=-#*%=\C^± ±\C_\CD==\C^\C^±±  ±±\C_\C_\C[\CZ|\CQ± ±\CP\CD||\CQ\CQ±±  ±±\CP\CP\C[\CZ x* \CP \CQ\xaf\xfb\xfa$$\\"
    set-variable $system &band $system &bnot 0x10000
    set-variable .change-font.type 255
    set-variable #l1 0
!elif &seq #l0 "iso8859-7" ; ISO-7 WIN-Greek
    set-char-mask "M" ""
    set-variable .change-font.type 161
!elif &seq #l0 "iso8859-3" ; ISO-3
    set-char-mask "M" ""
    set-variable .change-font.type 162
!elif &seq #l0 "microsoft-cp1250"
    ; map iso8859-2 -> win32 cp1250 
    set-char-mask "dp" "€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ"
    ;set-char-mask "M" "\xA1\xA5\xA5\xBC\xA6\x8C\xA9\x8A\xAB\x8D\xAC\x8F\xAE\x8E\xB1\xB9\xB5\xBE\xB6\x9C\xB7\xA1\xB9\x9A\xBB\x9D\xBC\x9F\xBE\x9E"
    set-variable .change-font.type 238
!elif &seq #l0 "microsoft-cp1251"
    ; map ISO8859-5 -> win32 cp1251
    set-char-mask "M" ""
    set-char-mask "dp" "€ƒ‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ"
    ;set-char-mask "M" "°À±Á²Â³Ã´ÄµÅ¶Æ·Ç¸È¹ÉºÊ»Ë¼Ì½Í¾Î¿ÏÀÐÁÑÂÒÃÓÄÔÅÕÆÖÇ×ÈØÉÙÊÚËÛÌÜÍÝÎÞÏß¡¨ÐàÑáÒâÓãÔäÕåÖæ×çØèÙéÚêÛëÜìÝíÞîßïàðáñâòãóäôåõæöç÷èøéùêúëûìüíýîþïÿñ¸"
    set-variable .change-font.type 204
!elif &seq #l0 "PC-437"
    set-char-mask "M" "£œª¦«®¬ª°ø±ñ²ýµæ·ú»¯¼¬½«¿¨ÀAÁAÂAÃAÄŽÅÆ’AAÇ€ÈEÉÊEËEEEÌIÍIÎIÏIIIÑ¥ÒOÓOÔOÕOÖ™OOÙUÚUÛUÜšUUÝYßáà…á âƒãaä„åaæ‘aaç‡èŠé‚êˆë‰ìí¡îŒï‹ñ¤ò•ó¢ô“õoö”÷öøoooù—ú£û–üuuýyÿ˜yy"
    set-variable $box-chars "³Ú¿ÀÙÂÃÅ´ÁÄ"
    set-variable $window-chars "=-#*%=\C^± ±\C_\CD==\C^\C^±±  ±±\C_\C_\C[\CZ|\CQ± ±\CP\CD||\CQ\CQ±±  ±±\CP\CP\C[\CZ x* \CP \CQ>\\.$$\\"
    set-variable $system &band $system &bnot 0x10000
    set-variable #l1 0
!elif &seq #l0 "PC-850"
    set-char-mask "M" "£œª¦«®¬ª®©°§±ñ²ý³ü´îµæ¶õ·ú¸ý¹û»¯¼¬½«¾ó¿¨À·ÁÂŠÃ²ÄŽÆ’Ç€ÈÔÉÊÒËÑÌÞÍÖÎ×ÏØÐÑÑ¥ÒãÓàÔâÕåÖ™×žØÙëÚéÛêÜšÝìÞçßÿà…á âƒä„å†æ‘ç‡èŠé‚êˆë‰ìí¡îŒï‹ñ¤ò•ó¢ô“õäö”÷öø›ù—ú£û–üýìþèÿ˜"
    set-variable $box-chars "³Ú¿ÀÙÂÃÅ´ÁÄ"
    set-variable $window-chars "=-#*%=\C^± ±\C_\CD==\C^\C^±±  ±±\C_\C_\C[\CZ|\CQ± ±\CP\CD||\CQ\CQ±±  ±±\CP\CP\C[\CZ x* \CP \CQ>\\.$$\\"
    set-variable $system &band $system &bnot 0x10000
    set-variable #l1 0
!elif &seq #l0 "PC-866"
    set-char-mask "M" "°\x80±\x81²\x82³\x83´\x84µ\x85¶\x86·\x87¸\x88¹\x89º\x8A»\x8B¼\x8C½\x8D¾\x8E¿\x8FÀ\x90Á\x91Â\x92Ã\x93Ä\x94Å\x95Æ\x96Ç\x97È\x98É\x99Ê\x9AË\x9BÌ\x9CÍ\x9DÎ\x9EÏ\x9F¡\xF0Ð\xA0Ñ\xA1Ò\xA2Ó\xA3Ô\xA4Õ\xA5Ö\xA6×\xA7Ø\xA8Ù\xA9Ú\xAAÛ\xABÜ\xACÝ\xADÞ\xAEß\xAFà\xE0á\xE1â\xE2ã\xE3ä\xE4å\xE5æ\xE6ç\xE7è\xE8é\xE9ê\xEAë\xEBì\xECí\xEDî\xEEï\xEFð\xFCñ\xF1"
    set-variable .change-font.type 204
!elif &seq #l0 "koi8-r"
    set-char-mask "M" "°á±â²÷³ç´äµå¶ö·ú¸é¹êºë»ì¼í½î¾ï¿ðÀòÁóÂôÃõÄæÅèÆãÇþÈûÉýÊÿËùÌøÍüÎàÏñ¡³ÐÁÑÂÒ×ÓÇÔÄÕÅÖÖ×ÚØÉÙÊÚËÛÌÜÍÝÎÞÏßÐàÒáÓâÔãÕäÆåÈæÃçÞèÛéÝêßëÙìØíÜîÀïÑñ£"
    set-variable .change-font.type 204
!elif &seq #l0 "plain-text"
    set-char-mask "M" "ÀAÁAÂAÃAÄAÇCÈEÉEÊEËEÌIÍIÎIÏIÑNÒOÓOÔOÕOÖO×xØOÙUÚUÛUÜUÝYßBàaáaâaäaåaçcèeéeêeëeìiíiîiïiñnòoóoôoõoöoøoùuúuûuüuýyþbÿy"
!endif

!if &reg &spr "/history/%s/ext-char-set" %platform "0"
    set-char-mask "dp" "\CY\CM\CL\CN\CK\CX\CU\CO\CV\CW\CR\CP\CQ\C^\C_\CG\C[\C]"
    set-char-mask "p"  "\CA\CB\CC\CD\CH\CI\CJ\CS\CT\CZ"
    set-variable .osd.checkbox-chars "^\CA\CB\CC\CD^"
    set-variable $box-chars "\CY\CM\CL\CN\CK\CX\CU\CO\CV\CW\CR"
    set-variable $window-chars "=-#*%=\C^\C[ \C[\C_*==\C^\C^\C[\C[  \C[\C[\C_\C_**|\CQ\C] \C]\CP*||\CQ\CQ\C]\C]  \C]\C]\CP\CP** \CT\CZ \CP \CQ\t\n\CG\CH\CI\\"
    set-variable $system &bor $system 0x10000
!else
    set-variable .osd.checkbox-chars "^[ X]^"
    !if #l1
        set-variable $box-chars "|+++++++++-"
        set-variable $window-chars "=-#*%=^   v*==^^      vv**|<   >*||<<      >>** x* > <>\\.$$\\"
        set-variable $system &band $system &bnot 0x10000
    !endif
!endif
